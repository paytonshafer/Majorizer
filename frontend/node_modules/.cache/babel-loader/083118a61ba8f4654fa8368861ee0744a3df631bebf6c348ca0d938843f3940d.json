{"ast":null,"code":"var _jsxFileName = \"/Users/paytonshafer/Desktop/CS350/Majorizer/frontend/src/context/AuthContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport jwt_decode from 'jwt-decode';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(); //Create the context\n\nexport default AuthContext; //export the context\n\n//The below is the auth provider, this is what goes in the jsx code\nexport const AuthProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  //Check if the auth tokens are in local storage otherwise null\n  let [authTokens, setAuthTokens] = useState(() => localStorage.getItem('authTokens') ? JSON.parse(localStorage.getItem('authTokens')) : null);\n  //check for local auth tokens then get user from them otherwise null\n  let [user, setUser] = useState(() => localStorage.getItem('authTokens') ? jwt_decode(localStorage.getItem('authTokens')) : null);\n  const history = useNavigate(); //This allows us to navigate through pages\n\n  //The below function takes care of logging in a user\n  let loginUser = async e => {\n    e.preventDefault(); //stops the default form from being submitted\n\n    //Here we fetch from our api with the username and password to return our auth tokens\n    let response = await fetch('http://127.0.0.1:8000/api/token/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'username': e.target.username.value,\n        'password': e.target.password.value\n      })\n    });\n    let data = await response.json(); //This should get the auth tokens if successful\n\n    if (response.status === 200) {\n      //if response is all good\n      setAuthTokens(data); //set auth tokens\n      setUser(jwt_decode(data.access)); //set the user\n      localStorage.setItem('authTokens', JSON.stringify(data)); //put the auth tokens in local storage\n      history('/home'); //navigate the user to home page\n    } else {\n      alert('Something went wrong');\n    }\n  };\n\n  //This function logs our the user\n  let logoutUser = () => {\n    //we set the user and tokens to null and remove the auth tokens from local storage\n    setAuthTokens(null);\n    setUser(null);\n    localStorage.removeItem('authTokens');\n    history('/'); //navigate the user back to login page\n  };\n\n  //This is the ontext data that we will want to send to different parts of the front end\n  let contextData = {\n    user: user,\n    authTokens: authTokens,\n    setAuthTokens: setAuthTokens,\n    setUser: setUser,\n    loginUser: loginUser,\n    logoutUser: logoutUser\n  };\n\n  //we return the authprovider such that the children of it have acess to the content\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"nMy+JVWhuDaDO+/5cPsShk0PMN0=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","jwt_decode","useNavigate","jsxDEV","_jsxDEV","AuthContext","AuthProvider","_ref","_s","children","authTokens","setAuthTokens","localStorage","getItem","JSON","parse","user","setUser","history","loginUser","e","preventDefault","response","fetch","method","headers","body","stringify","target","username","value","password","data","json","status","access","setItem","alert","logoutUser","removeItem","contextData","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/paytonshafer/Desktop/CS350/Majorizer/frontend/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState} from \"react\";\nimport jwt_decode from 'jwt-decode';\nimport { useNavigate } from 'react-router-dom';\n\nconst AuthContext = createContext() //Create the context\n\nexport default AuthContext; //export the context\n\n//The below is the auth provider, this is what goes in the jsx code\nexport const AuthProvider = ({children}) => {\n    //Check if the auth tokens are in local storage otherwise null\n    let [authTokens, setAuthTokens] = useState(()=> localStorage.getItem('authTokens') ? JSON.parse(localStorage.getItem('authTokens')) : null)\n    //check for local auth tokens then get user from them otherwise null\n    let [user, setUser] = useState(()=> localStorage.getItem('authTokens') ? jwt_decode(localStorage.getItem('authTokens')) : null)\n\n    const history = useNavigate()//This allows us to navigate through pages\n\n    //The below function takes care of logging in a user\n    let loginUser = async (e) => {\n        e.preventDefault() //stops the default form from being submitted\n        \n        //Here we fetch from our api with the username and password to return our auth tokens\n        let response = await fetch('http://127.0.0.1:8000/api/token/', {\n            method: 'POST',\n            headers:{\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({'username':e.target.username.value, 'password':e.target.password.value})\n        })\n        let data = await response.json() //This should get the auth tokens if successful\n\n        if(response.status === 200){ //if response is all good\n            setAuthTokens(data) //set auth tokens\n            setUser(jwt_decode(data.access)) //set the user\n            localStorage.setItem('authTokens', JSON.stringify(data)) //put the auth tokens in local storage\n            history('/home') //navigate the user to home page\n        }else{alert('Something went wrong')}\n    }\n\n    //This function logs our the user\n    let logoutUser = () => {\n        //we set the user and tokens to null and remove the auth tokens from local storage\n        setAuthTokens(null)\n        setUser(null)\n        localStorage.removeItem('authTokens')\n        history('/') //navigate the user back to login page\n    }\n\n    //This is the ontext data that we will want to send to different parts of the front end\n    let contextData = {\n        user: user,\n        authTokens: authTokens,\n        setAuthTokens: setAuthTokens,\n        setUser: setUser,\n        loginUser: loginUser,\n        logoutUser: logoutUser,\n    }\n\n    //we return the authprovider such that the children of it have acess to the content\n    return(\n        <AuthContext.Provider value={contextData}>\n            {children}\n        </AuthContext.Provider>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}