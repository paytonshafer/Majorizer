{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paytonshafer/Desktop/CS350/Majorizer/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/paytonshafer/Desktop/CS350/Majorizer/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/paytonshafer/Desktop/CS350/Majorizer/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//This is the page where a advisor can see student request and aprove/deny them and leave a comment\nimport React,{useState,useEffect}from'react';import'./styles/ViewRequestPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ViewRequestPage=function ViewRequestPage(){var _useState=useState(function(){return localStorage.getItem('advconnections')?JSON.parse(localStorage.getItem('advconnections')):null;}),_useState2=_slicedToArray(_useState,1),connections=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),requestList=_useState4[0],setRequestList=_useState4[1];var students=[];if(connections){connections.map(function(conn){return students.push({id:conn.student.student.id,stud:conn.student.student.username,label:conn.student.student.username});});}useEffect(function(){var studs=[];if(connections){connections.map(function(conn){return studs.push({id:conn.student.student.id,stud:conn.student.student.username,label:conn.student.student.username});});}var requests=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var temp,i,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:temp=[];i=0;i;case 3:if(!(i<studs.length)){_context.next=15;break;}console.log(i);_context.next=7;return fetch('http://127.0.0.1:8000/api/request/'+studs[i].id,{method:'GET',headers:{'Content-Type':'application/json'}});case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;temp.push(data);//console.log(requestList)\ncase 12:i++;_context.next=3;break;case 15:setRequestList(temp);case 16:case\"end\":return _context.stop();}},_callee);}));return function requests(){return _ref.apply(this,arguments);};}();requests();},[connections]);//*************************************************\n/*function removeRequest(){\n        document.getElementById(\"requestform\").style.display = \"none\";\n        document.getElementById(\"icon\").style.display = \"none\";\n    }*/var ApproveDenyButtons=function ApproveDenyButtons(_ref2){var req=_ref2.req;var _useState5=useState(req.result),_useState6=_slicedToArray(_useState5,1),reqResult=_useState6[0];var _useState7=useState(reqResult===null?true:false),_useState8=_slicedToArray(_useState7,2),isVisible=_useState8[0],setVisible=_useState8[1];var _useState9=useState(reqResult===null?null:reqResult===true?'approve':'deny'),_useState10=_slicedToArray(_useState9,2),submitted=_useState10[0],setSubmitted=_useState10[1];function handleSubmit(e){if(window.confirm(\"Are you sure?\")){if(e.target.name==='approve'){setSubmitted(\"approve\");fetch('http://127.0.0.1:8000/api/updatereq/'+req.id,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"result\":true})});}else{setSubmitted(\"deny\");fetch('http://127.0.0.1:8000/api/updatereq/'+req.id,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"result\":false})});}setVisible(false);}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{name:\"approve\",className:\"approvedeny\",onClick:function onClick(e){return handleSubmit(e);},style:isVisible?{display:'inline'}:{display:'none'},children:\"Approve\"}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"button\",{name:\"deny\",className:\"approvedeny\",onClick:function onClick(e){return handleSubmit(e);},style:isVisible?{display:'inline'}:{display:'none'},children:\"Deny\"}),submitted!==null?submitted==='approve'?/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:/*#__PURE__*/_jsx(\"b\",{children:\"Approved\"})}):submitted==='deny'?/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(\"b\",{children:\"Denied\"})}):null:null]});};function BuildPage(){return/*#__PURE__*/_jsxs(\"div\",{children:[console.log(requestList),/*#__PURE__*/_jsx(\"h1\",{children:\"Current Requests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"positionbox\",children:/*#__PURE__*/_jsx(\"img\",{className:\"icon\",id:\"icon\",src:\"https://cdn-icons-png.flaticon.com/512/3781/3781605.png\",alt:\"requests\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"columns\",children:requestList.map(function(requestlist){return requestlist.map(function(request){return/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",id:\"requestform\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"stud\",className:\"header\",children:request.adv_stud.student.student.username}),/*#__PURE__*/_jsxs(\"h2\",{className:\"header\",children:[\"Subject: \",request.subject]}),/*#__PURE__*/_jsx(\"h2\",{className:\"header\",children:\"Request:\"}),/*#__PURE__*/_jsx(\"p\",{children:request.data}),/*#__PURE__*/_jsx(ApproveDenyButtons,{req:request})]},request.id);});})})]});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BuildPage,{})});};export default ViewRequestPage;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ViewRequestPage","_useState","localStorage","getItem","JSON","parse","_useState2","_slicedToArray","connections","_useState3","_useState4","requestList","setRequestList","students","map","conn","push","id","student","stud","username","label","studs","requests","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","temp","i","response","data","wrap","_callee$","_context","prev","next","length","console","log","fetch","method","headers","sent","json","stop","apply","arguments","ApproveDenyButtons","_ref2","req","_useState5","result","_useState6","reqResult","_useState7","_useState8","isVisible","setVisible","_useState9","_useState10","submitted","setSubmitted","handleSubmit","e","window","confirm","target","name","body","stringify","children","className","onClick","style","display","color","BuildPage","src","alt","requestlist","request","adv_stud","subject"],"sources":["/Users/paytonshafer/Desktop/CS350/Majorizer/frontend/src/pages/ViewRequestPage.jsx"],"sourcesContent":["//This is the page where a advisor can see student request and aprove/deny them and leave a comment\nimport React,{useState, useEffect} from 'react'\nimport './styles/ViewRequestPage.css'\n\nconst ViewRequestPage = () => {\n    let [connections, ] = useState(()=> localStorage.getItem('advconnections') ? JSON.parse(localStorage.getItem('advconnections')) : null)\n    let [requestList, setRequestList] = useState([])\n    let students = []\n    if(connections){\n        connections.map((conn) => (students.push({id: conn.student.student.id, stud: conn.student.student.username, label: conn.student.student.username})))\n    }\n\n    useEffect(()=>{\n        let studs = []\n        if(connections){\n            connections.map((conn) => (studs.push({id: conn.student.student.id, stud: conn.student.student.username, label: conn.student.student.username})))\n        }\n        let requests = async () => {\n            let temp = []\n            let i=0;\n            for(i; i< studs.length; i++){\n                console.log(i)\n                let response = await fetch('http://127.0.0.1:8000/api/request/' + studs[i].id, {\n                    method: 'GET',\n                    headers:{\n                        'Content-Type': 'application/json'\n                    }\n                })\n                let data = await response.json()\n                temp.push(data)\n                //console.log(requestList)\n            }\n            setRequestList(temp)\n        }\n        requests()\n    },[connections])\n    //*************************************************\n\n    /*function removeRequest(){\n        document.getElementById(\"requestform\").style.display = \"none\";\n        document.getElementById(\"icon\").style.display = \"none\";\n    }*/\n    \n       \n    const ApproveDenyButtons = ({ req }) => {\n        let [reqResult, ] = useState(req.result)\n        let [isVisible, setVisible] = useState(reqResult === null ? true : false)\n        let [submitted, setSubmitted] = useState(\n            reqResult === null ? null :\n            reqResult === true ? 'approve' : 'deny'\n        )\n        function handleSubmit(e){\n            if(window.confirm(\"Are you sure?\")){\n                if(e.target.name === 'approve'){\n                    setSubmitted(\"approve\")\n\n                    fetch('http://127.0.0.1:8000/api/updatereq/' + req.id, {\n                        method: 'PUT',\n                        headers:{\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\"result\": true})\n                    })\n\n                }else{\n                    setSubmitted(\"deny\")\n\n                    fetch('http://127.0.0.1:8000/api/updatereq/' + req.id, {\n                        method: 'PUT',\n                        headers:{\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\"result\": false})\n                    })\n\n                }\n                setVisible(false)\n            }\n        }\n        return(\n            <div>\n                <button name='approve' className='approvedeny' onClick={(e) => handleSubmit(e)} style={isVisible ? {display: 'inline'} : {display: 'none'}}>Approve</button>\n                <span></span>\n                <button name='deny'className='approvedeny' onClick={(e) => handleSubmit(e)} style={isVisible ? {display: 'inline'} : {display: 'none'}}>Deny</button>\n                {submitted !== null ? \n                (submitted === 'approve' ? <p style={{color: \"green\"}}><b>Approved</b></p> : (submitted === 'deny' ? <p style={{color: \"red\"}}><b>Denied</b></p> : null)) : null\n                }\n            </div>\n        )\n    }\n    function BuildPage(){\n        return(\n            <div>\n                {console.log(requestList)}\n                <h1>Current Requests</h1>\n                <div className='positionbox'>\n                <img className='icon' id='icon' src='https://cdn-icons-png.flaticon.com/512/3781/3781605.png' alt='requests'></img>\n                </div>\n                <div className='columns'>\n                {requestList.map(requestlist => (\n                    requestlist.map(request => (\n                        <div key={request.id} className='fields' id='requestform'>\n                            <h1 id='stud' className='header'>{request.adv_stud.student.student.username}</h1>\n                            <h2 className='header'>Subject: {request.subject}</h2>\n                            <h2 className='header'>Request:</h2>\n                            <p>{request.data}</p>\n                            <ApproveDenyButtons req={request}/>\n                        </div>\n                ))))}\n                </div>\n            </div>\n        )\n    }\n\n    return(\n        <div>\n            <BuildPage/>\n        </div>\n    );\n    }\n\nexport default ViewRequestPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}